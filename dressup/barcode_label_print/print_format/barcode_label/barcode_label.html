<!-- This is a Jinja2 template file for ERPNext/Frappe. CSS linting disabled due to template syntax. -->
{% set template = frappe.get_doc("Barcode Label Template", doc.label_template) %}
{% set code_value = doc.item_code %}
{% if doc.batch_no %}{% set code_value = doc.batch_no %}{% endif %}
{% if doc.serial_no %}{% set code_value = doc.serial_no %}{% endif %}
{% set barcode_image = get_barcode_base64(template.barcode_type, code_value) %}

<div style="
    width: {{ template.label_width }}mm;
    height: {{ template.label_height }}mm;
    border: 1px solid #000;
    padding: 2mm;
    font-family: sans-serif;
    font-size: {{ template.font_size }}px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    overflow: hidden;
    background: white;
    page-break-inside: avoid;
">
    {% if template.include_company_name %}
    <div style='font-weight: bold;'>{{ frappe.db.get_default("Company") }}</div>
    {% endif %}

    {% if template.include_item_name and doc.item_name %}
    <div>{{ doc.item_name }}</div>
    {% endif %}

    {% if template.include_item_code and doc.item_code %}
    <div>{{ doc.item_code }}</div>
    {% endif %}



    {% if barcode_image %}
    <img src='{{ barcode_image }}' style='max-width: 100%; max-height: 50%; margin: 2px 0;' />
    {% endif %}

    {% if template.include_batch_no and doc.batch_no %}
    <div>Batch: {{ doc.batch_no }}</div>
    {% endif %}

    {% if template.include_serial_no and doc.serial_no %}
    <div>SN: {{ doc.serial_no }}</div>
    {% endif %}

    {% if template.include_expiry_date and doc.expiry_date %}
    <div>Exp: {{ doc.expiry_date }}</div>
    {% endif %}
</div>